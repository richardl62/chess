(this["webpackJsonpdraggable-tutorial"]=this["webpackJsonpdraggable-tutorial"]||[]).push([[0],{34:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(22),o=t.n(c),i=t(3),l=t(4),u=t(14),s=t(12),d=t(26),f=function(){function e(a,t){if(Object(i.a)(this,e),!(a instanceof Array&&"boolean"===typeof t))throw new Error("Bad input to BoardLayout");this._corePieces=a,this._topLeftBlack=t,Object.seal(this)}return Object(l.a)(e,[{key:"copy",value:function(){return new e(this._corePieces.map((function(e){return Object(d.a)(e)})),this._topLeftBlack)}},{key:"corePiece",value:function(e,a,t){if(void 0===this._corePieces[e][a])throw new Error("Invalid row or column number: ".concat(e," ").concat(a));return void 0!==t&&(this._corePieces[e][a]=t),this._corePieces[e][a]}},{key:"isBlack",value:function(e,a){return(e+a)%2===0?this._topLeftBlack:!this._topLeftBlack}},{key:"findCorePiecebyId",value:function(e){for(var a=0;a<this.nRows;++a)for(var t=0;t<this.nCols;++t){var r=this._corePieces[a][t];if(r&&r.id===e)return{row:a,col:t,piece:r}}return null}},{key:"nRows",get:function(){return this._corePieces.length}},{key:"nCols",get:function(){return this._corePieces[0].length}}]),e}(),m=t(13),v=t(39),h="piece",b=t(38),p=t(23),k=t.n(p),y=["p","n","b","r","q","k"],g=["P","N","B","R","Q","K"],P=y.concat(g),w=function e(a,t){Object(i.a)(this,e),this.id=t,this.name=a,Object.freeze(this)},E=function(){function e(){Object(i.a)(this,e),this._lastUsedId=0}return Object(l.a)(e,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return null;if(e instanceof w)return this.make(e.name);if(!P.includes(e))throw new Error("CorePieceFactor.make() given unrecognised input: ".concat(e));return++this._lastUsedId,new w(e,this._lastUsedId)}}]),e}();function C(e){var a=e.corePiece,t=e.gameCallbacks,r=Object(b.a)({item:{type:h,id:a.id},collect:function(e){return{isDragging:!!e.isDragging()}},begin:function(){return t.dragStart(a.id)},end:function(e,r){return t.dragEnd(a.id,r.didDrop())}}),c=Object(m.a)(r,2),o=c[0].isDragging,i=c[1],l=o&&t.dragBehaviour(a.id).move;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"piece-div",ref:i},l?null:n.a.createElement(k.a,{piece:a.name})))}var O=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props,a=e.black,t=e.children,r="square "+(a?"black-square":"white-square");return n.a.createElement("div",{className:r},t)}}]),t}(n.a.PureComponent);var B=function(e){var a=e.corePiece,t=e.gameCallbacks,r=e.isBlack,c=e.row,o=e.col,i=Object(v.a)({accept:h,drop:function(e){return t.movePiece(e.id,c,o)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(m.a)(i,2)[1];return n.a.createElement("div",{ref:l,style:{position:"relative",width:"100%",height:"100%"}},n.a.createElement(O,{black:r},a?n.a.createElement(C,{corePiece:a,gameCallbacks:t}):null))};function _(e,a,t){var r=function(e){return t+"-"+e};a.push(n.a.createElement("div",{key:r("start")}));for(var c=0;c<e;++c)a.push(n.a.createElement("div",{key:r(c),className:"board-boarder board-boarder-letter"},String.fromCharCode(65+c)));a.push(n.a.createElement("div",{key:r("end")}))}function j(e,a,t,r){var c=function(e){return"r"+a+"-"+e};r.push(n.a.createElement("div",{key:c("start"),className:"board-boarder board-boarder-number"},a+1));for(var o=0;o<e.nCols;++o)r.push(n.a.createElement(B,{index:o,key:c(o),corePiece:e.corePiece(a,o),gameCallbacks:t,isBlack:e.isBlack(a,o),row:a,col:o}));r.push(n.a.createElement("div",{key:c("end"),className:"board-boarder board-boarder-number"},a+1))}function L(e){var a=e.layout,t=e.gameCallbacks,r=a.nRows,c=a.nCols,o=[];_(c,o,"top");for(var i=0;i<r;++i)j(a,i,t,o);_(c,o,"bottom");var l={display:"grid",gridTemplateColumns:"repeat(".concat(c+2,",auto)"),gridTemplateRows:"repeat(".concat(r+2,",auto)")};return n.a.createElement("div",{className:"board",style:l},o)}var N=t(37),I=t(25),S=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function R(e){var a=e.corePieces,t=e.gameCallbacks;return n.a.createElement("div",{className:"permanent-pieces"},a.map((function(e,a){return n.a.createElement("div",{className:"square",index:a,key:a},n.a.createElement(C,{corePiece:e,gameCallbacks:t}))})))}function q(e,a){var t=e.map((function(e){return e.map((function(e){return a.make(e)}))}));return new f(t,e.topLeftBlack)}S.topLeftBlack=!1,Object.freeze(S);var D=function(e){Object(u.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(i.a)(this,t),e=a.call(this);var r=new E;e._corePieceFactory=r,e.state={boardLayout:q(S,r)};var n=y.map((function(e){return r.make(e)})),c=g.map((function(e){return r.make(e)}));return e._OffBoardCorePieces={black:n,white:c,all:n.concat(c)},e._callbacks={movePiece:function(){var a;return(a=e).movePiece.apply(a,arguments)},dragEnd:function(){var a;return(a=e).dragEnd.apply(a,arguments)},dragStart:function(){var a;return(a=e).dragStart.apply(a,arguments)},dragBehaviour:function(){var a;return(a=e).dragBehaviour.apply(a,arguments)}},Object.freeze(e._OffBoardCorePieces),e}return Object(l.a)(t,[{key:"copyPiece",value:function(e){return this._corePieceFactory.make(e)}},{key:"movePiece",value:function(e,a,t){var r=this.state.boardLayout.copy(),n=r.findCorePiecebyId(e);if(n)a===n.row&&t===n.col||(r.corePiece(a,t,n.piece),r.corePiece(n.row,n.col,null));else{var c=this._OffBoardCorePieces.all.find((function(a){return a.id===e}));if(!c)throw new Error("Piece with id ".concat(e," not found"));r.corePiece(a,t,this.copyPiece(c))}this.setState({boardLayout:r})}},{key:"dragEnd",value:function(e,a){if(!a){var t=this.state.boardLayout.findCorePiecebyId(e);if(t){var r=this.state.boardLayout.copy();r.corePiece(t.row,t.col,null),this.setState({boardLayout:r})}}}},{key:"dragStart",value:function(e){}},{key:"dragBehaviour",value:function(e){var a=Boolean(this.state.boardLayout.findCorePiecebyId(e));return{move:a,copy:!a}}},{key:"render",value:function(){return n.a.createElement(N.a,{backend:I.a},n.a.createElement("div",{className:"game"},n.a.createElement(R,{corePieces:this._OffBoardCorePieces.black,gameCallbacks:this._callbacks}),n.a.createElement(L,{layout:this.state.boardLayout,gameCallbacks:this._callbacks}),n.a.createElement(R,{corePieces:this._OffBoardCorePieces.white,gameCallbacks:this._callbacks})))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(34);var F=document.getElementById("root");o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(D,null)),F),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.d0d3e6bd.chunk.js.map