(this["webpackJsonpdraggable-tutorial"]=this["webpackJsonpdraggable-tutorial"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),i=n(3),l=n(4),u=n(14),s=n(12),f=n(26),m=function(){function e(t,n){if(Object(i.a)(this,e),!(t instanceof Array&&"boolean"===typeof n))throw new Error("Bad input to BoardLayout");this._corePieces=t,this._topLeftBlack=n,Object.seal(this)}return Object(l.a)(e,[{key:"copy",value:function(){return new e(this._corePieces.map((function(e){return Object(f.a)(e)})),this._topLeftBlack)}},{key:"corePiece",value:function(e,t,n){if(void 0===this._corePieces[e][t])throw new Error("Invalid row or column number: ".concat(e," ").concat(t));return void 0!==n&&(this._corePieces[e][t]=n),this._corePieces[e][t]}},{key:"isBlack",value:function(e,t){return(e+t)%2===0?this._topLeftBlack:!this._topLeftBlack}},{key:"findCorePiecebyId",value:function(e){for(var t=0;t<this.nRows;++t)for(var n=0;n<this.nCols;++n){var r=this._corePieces[t][n];if(r&&r.id===e)return{row:t,col:n,piece:r}}return null}},{key:"nRows",get:function(){return this._corePieces.length}},{key:"nCols",get:function(){return this._corePieces[0].length}}]),e}(),d=n(13),h=n(39),v="piece",p=n(38),P=n(23),b=n.n(P),k=["p","n","b","r","q","k"],y=["P","N","B","R","Q","K"],w=k.concat(y),O=function e(t,n){Object(i.a)(this,e),this.id=n,this.name=t,Object.freeze(this)},E=function(){function e(){Object(i.a)(this,e),this._lastUsedId=0}return Object(l.a)(e,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return null;if(e instanceof O)return this.make(e.name);if(!w.includes(e))throw new Error("CorePieceFactor.make() given unrecognised input: ".concat(e));return++this._lastUsedId,new O(e,this._lastUsedId)}}]),e}();function g(e){var t=e.corePiece,n=Object(p.a)({item:{type:v,id:t.id}}),r=Object(d.a)(n,2)[1];return a.a.createElement("div",{className:"piece",ref:r},a.a.createElement(b.a,{piece:t.name}))}var j=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.black,n=e.children,r="square"+(t?" blackSquare":"");return a.a.createElement("div",{className:r},n)}}]),n}(a.a.PureComponent);function B(e){var t=e.corePiece,n=e.movePiece,r=e.isBlack,c=e.row,o=e.col,i=Object(h.a)({accept:v,drop:function(e){return n(e.id,c,o)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(d.a)(i,2)[1];return a.a.createElement("div",{ref:l,style:{position:"relative",width:"100%",height:"100%"}},a.a.createElement(j,{black:r},t?a.a.createElement(g,{corePiece:t}):null))}function _(e,t){t.push(a.a.createElement("div",null));for(var n=1;n<=e;++n)t.push(a.a.createElement("div",{className:"column-number",key:"col"+n},n));t.push(a.a.createElement("div",null))}function C(e,t,n,r){var c=String.fromCharCode(65+t);r.push(a.a.createElement("div",{className:"row-letter"},c));for(var o=0;o<e.nCols;++o)r.push(a.a.createElement(B,{index:o,key:o,corePiece:e.corePiece(t,o),movePiece:n,isBlack:e.isBlack(t,o),row:t,col:o}));r.push(a.a.createElement("div",{className:"row-letter"},c))}function L(e){var t=e.layout,n=e.movePiece,r=t.nRows,c=t.nCols,o=[];_(c,o);for(var i=0;i<r;++i)C(t,i,n,o);_(c,o);var l={display:"grid",gridTemplateColumns:"repeat(".concat(c+2,",auto)"),gridTemplateRows:"repeat(".concat(r+2,",auto)")};return a.a.createElement("div",{className:"board",style:l},o)}var N=n(37),I=n(25),R=[["r","n","b","q","k","b","n","r"],["p","p","p","p","p","p","p","p"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["P","P","P","P","P","P","P","P"],["R","N","B","Q","K","B","N","R"]];function q(e){var t=e.corePieces;return a.a.createElement("div",{className:"permanent-pieces"},t.map((function(e,t){return a.a.createElement("div",{index:t,key:t},a.a.createElement(g,{corePiece:e}))})))}function S(e,t){var n=e.map((function(e){return e.map((function(e){return t.make(e)}))}));return new m(n,e.topLeftBlack)}R.topLeftBlack=!1,Object.freeze(R);var z=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n),(e=t.call(this)).movePiece=function(t,n,r){var a=e.state.boardLayout.copy(),c=a.findCorePiecebyId(t);if(c)n===c.row&&r===c.col||(a.corePiece(n,r,c.piece),a.corePiece(c.row,c.col,null));else{var o=e._OffBoardCorePieces.all.find((function(e){return e.id===t}));if(!o)throw new Error("Piece with id ".concat(t," not found"));a.corePiece(n,r,e.copyPiece(o))}e.setState({boardLayout:a})};var r=new E;e._corePieceFactory=r,e.state={boardLayout:S(R,r)};var a=k.map((function(e){return r.make(e)})),c=y.map((function(e){return r.make(e)}));return e._OffBoardCorePieces={black:a,white:c,all:a.concat(c)},Object.freeze(e._OffBoardCorePieces),e}return Object(l.a)(n,[{key:"copyPiece",value:function(e){return this._corePieceFactory.make(e)}},{key:"render",value:function(){return a.a.createElement(N.a,{backend:I.a},a.a.createElement("div",{className:"game"},a.a.createElement(q,{corePieces:this._OffBoardCorePieces.black}),a.a.createElement(L,{layout:this.state.boardLayout,movePiece:this.movePiece}),a.a.createElement(q,{corePieces:this._OffBoardCorePieces.white})))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(34);var F=document.getElementById("root");o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(z,null)),F),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.c28ec2d6.chunk.js.map