(this["webpackJsonpdraggable-tutorial"]=this["webpackJsonpdraggable-tutorial"]||[]).push([[0],{24:function(e,n,t){e.exports=t(31)},30:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(17),i=t.n(o),a=t(4),l=t(5),u=t(21),s=t(20),h=t(10),v=t(34),d="piece",b=["bC","bK","bB","bQ","bK","bP"].concat(["wC","wK","wB","wQ","wK","wP"]),m=0;function w(e){var n=e.corePiece,t=Object(v.a)({item:{type:d,id:n.id}}),r=Object(h.a)(t,2)[1];return c.a.createElement("div",{className:"piece",ref:r},n.name)}var f=function(){function e(n){var t=n.name,r=n.dragBehaviour;if(Object(a.a)(this,e),!b.includes(t))throw new Error("CorePiece given unrecognised piece name: ".concat(t));if(!["move","copy"].includes(r))throw new Error("CorePiece give unrecognised drag behaviour: ".concat(r));++m,this._id=m,this._name=t,this._moveWhenDragged="move"===r,Object.freeze(this)}return Object(l.a)(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"moveWhenDragged",get:function(){return this.__moveWhenDragged}},{key:"copyWhenDragged",get:function(){return!this._moveWhenDragged}}]),e}(),P=[["bC","bK","bB","bQ","bK","bB","bK","bC"],["bP","bP","bP","bP","bP","bP","bP","bP"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["wP","wP","wP","wP","wP","wP","wP","wP"],["wC","wK","wB","wQ","wK","wB","wK","wC"]];P.topLeftBlack=!0,Object.freeze(P);var g=function(){function e(n){Object(a.a)(this,e),n?(this._corePieces=n._corePieces,this._topPieces=n._corePieces):(this._corePieces=P.map((function(e){return e.map((function(e){return e?new f({name:e,dragBehaviour:"move"}):null}))})),this._topLeftBlack=!1),Object.seal(this)}return Object(l.a)(e,[{key:"corePiece",value:function(e,n){if(void 0===this._corePieces[e][n])throw new Error("Invalid row or column number: ".concat(e," ").concat(n));return this._corePieces[e][n]}},{key:"movePiece",value:function(e,n,t){if(void 0===this._corePieces[n][t])throw new Error("Invalid row or column number: ".concat(n," ").concat(t));var r=this.findCorePiecebyId(e);this._corePieces[n][t]!==r.piece&&(this._corePieces[n][t]=r.piece,r.piece.copyWhenDragged||(this._corePieces[r.row][r.col]=null))}},{key:"isBlack",value:function(e,n){return(e+n)%2===0?this._topLeftBlack:!this._topLeftBlack}},{key:"findCorePiecebyId",value:function(e){for(var n=0;n<this.nRows;++n)for(var t=0;t<this.nCols;++t){var r=this._corePieces[n][t];if(r&&r.id===e)return{row:n,col:t,piece:r}}throw new Error("Cannot find piece to move: ".concat(e))}},{key:"nRows",get:function(){return this._corePieces.length}},{key:"nCols",get:function(){return this._corePieces[0].length}}]),e}(),p=t(35),y=t(33),k=t(19);function _(e){var n=e.black,t=e.children,r="square"+(n?" blackSquare":"");return c.a.createElement("div",{className:r},t)}function B(e){var n=e.corePiece,t=e.movePiece,r=e.isBlack,o=e.row,i=e.col,a=Object(p.a)({accept:d,drop:function(e){return t(e.id,o,i)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(h.a)(a,2)[1];return c.a.createElement("div",{ref:l,style:{position:"relative",width:"100%",height:"100%"}},c.a.createElement(_,{black:r},n?c.a.createElement(w,{corePiece:n}):null))}function E(e){for(var n=e.layout,t=e.movePiece,r=n.nRows,o=n.nCols,i=[],a=0;a<r;++a)for(var l=0;l<o;++l)i.push(c.a.createElement(B,{corePiece:n.corePiece(a,l),movePiece:t,index:i.length,key:[a,l],isBlack:n.isBlack(a,l),row:a,col:l}));var u={display:"grid",gridTemplateColumns:"repeat(".concat(o,",50px)"),gridTemplateRows:"repeat(".concat(r,",50px)"),width:"fit-content"};return c.a.createElement(y.a,{backend:k.a},c.a.createElement("div",{className:"board",style:u},i))}var O=function(e){Object(u.a)(t,e);var n=Object(s.a)(t);function t(){var e;return Object(a.a)(this,t),(e=n.call(this)).movePiece=function(n,t,r){var c=new g(e.state.boardLayout);c.movePiece(n,t,r),e.setState({boardLayout:c})},e.state={boardLayout:new g},e}return Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(E,{layout:this.state.boardLayout,movePiece:this.movePiece})}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(30);var C=document.getElementById("root");i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),C),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.750e228f.chunk.js.map