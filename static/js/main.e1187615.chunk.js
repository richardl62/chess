(this["webpackJsonpdraggable-tutorial"]=this["webpackJsonpdraggable-tutorial"]||[]).push([[0],{27:function(e,t,n){e.exports=n(34)},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),i=n(3),l=n(4),u=n(14),s=n(12),f=n(25),d=function(){function e(t,n){if(Object(i.a)(this,e),!(t instanceof Array&&"boolean"===typeof n))throw new Error("Bad input to BoardLayout");this._corePieces=t,this._topLeftBlack=n,Object.seal(this)}return Object(l.a)(e,[{key:"copy",value:function(){return new e(this._corePieces.map((function(e){return Object(f.a)(e)})),this._topLeftBlack)}},{key:"corePiece",value:function(e,t,n){if(void 0===this._corePieces[e][t])throw new Error("Invalid row or column number: ".concat(e," ").concat(t));return void 0!==n&&(this._corePieces[e][t]=n),this._corePieces[e][t]}},{key:"isBlack",value:function(e,t){return(e+t)%2===0?this._topLeftBlack:!this._topLeftBlack}},{key:"findCorePiecebyId",value:function(e){for(var t=0;t<this.nRows;++t)for(var n=0;n<this.nCols;++n){var r=this._corePieces[t][n];if(r&&r.id===e)return{row:t,col:n,piece:r}}return null}},{key:"nRows",get:function(){return this._corePieces.length}},{key:"nCols",get:function(){return this._corePieces[0].length}}]),e}(),b=n(13),h=n(38),m="piece",P=n(37),w=["bC","bK","bB","bQ","bK","bP"],v=["wC","wK","wB","wQ","wK","wP"],p=w.concat(v),k=function e(t,n){Object(i.a)(this,e),this.id=n,this.name=t,Object.freeze(this)},y=function(){function e(){Object(i.a)(this,e),this._lastUsedId=0}return Object(l.a)(e,[{key:"make",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return null;if(e instanceof k)return this.make(e.name);if(!p.includes(e))throw new Error("CorePieceFactor.make() given unrecognised input: ".concat(e));return++this._lastUsedId,new k(e,this._lastUsedId)}}]),e}();function O(e){var t=e.corePiece,n=Object(P.a)({item:{type:m,id:t.id}}),r=Object(b.a)(n,2)[1];return c.a.createElement("div",{className:"piece",ref:r},t.name)}var B=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.black,n=e.children,r="square"+(t?" blackSquare":"");return c.a.createElement("div",{className:r},n)}}]),n}(c.a.PureComponent);function g(e){var t=e.corePiece,n=e.movePiece,r=e.isBlack,a=e.row,o=e.col,i=Object(h.a)({accept:m,drop:function(e){return n(e.id,a,o)},collect:function(e){return{isOver:!!e.isOver()}}}),l=Object(b.a)(i,2)[1];return c.a.createElement("div",{ref:l,style:{position:"relative",width:"100%",height:"100%"}},c.a.createElement(B,{black:r},t?c.a.createElement(O,{corePiece:t}):null))}function j(e){for(var t=e.layout,n=e.movePiece,r=t.nRows,a=t.nCols,o=[],i=0;i<r;++i)for(var l=0;l<a;++l)o.push(c.a.createElement(g,{corePiece:t.corePiece(i,l),movePiece:n,index:o.length,key:[i,l],isBlack:t.isBlack(i,l),row:i,col:l}));var u={display:"grid",gridTemplateColumns:"repeat(".concat(a,",50px)"),gridTemplateRows:"repeat(".concat(r,",50px)"),width:"fit-content"};return c.a.createElement("div",{className:"board",style:u},o)}var _=n(36),E=n(24),C=[["bC","bK","bB","bQ","bK","bB","bK","bC"],["bP","bP","bP","bP","bP","bP","bP","bP"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["wP","wP","wP","wP","wP","wP","wP","wP"],["wC","wK","wB","wQ","wK","wB","wK","wC"]];function L(e){var t=e.corePieces;return c.a.createElement("div",{className:"permanentPieces"},t.map((function(e,t){return c.a.createElement(O,{corePiece:e,index:t,key:e.id})})))}function K(e,t){var n=e.map((function(e){return e.map((function(e){return t.make(e)}))}));return new d(n,e.topLeftBlack)}C.topLeftBlack=!0,Object.freeze(C);var I=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n),(e=t.call(this)).movePiece=function(t,n,r){var c=e.state.boardLayout.copy(),a=c.findCorePiecebyId(t);if(a)n===a.row&&r===a.col||(c.corePiece(n,r,a.piece),c.corePiece(a.row,a.col,null));else{var o=e._OffBoardCorePieces.all.find((function(e){return e.id===t}));if(!o)throw new Error("Piece with id ".concat(t," not found"));c.corePiece(n,r,e.copyPiece(o))}e.setState({boardLayout:c})};var r=new y;e._corePieceFactory=r,e.state={boardLayout:K(C,r)};var c=w.map((function(e){return r.make(e)})),a=v.map((function(e){return r.make(e)}));return e._OffBoardCorePieces={black:c,white:a,all:c.concat(a)},Object.freeze(e._OffBoardCorePieces),e}return Object(l.a)(n,[{key:"copyPiece",value:function(e){return this._corePieceFactory.make(e)}},{key:"render",value:function(){return c.a.createElement(_.a,{backend:E.a},c.a.createElement("div",{className:"chess-game"},c.a.createElement(L,{corePieces:this._OffBoardCorePieces.black}),c.a.createElement(j,{layout:this.state.boardLayout,movePiece:this.movePiece}),c.a.createElement(L,{corePieces:this._OffBoardCorePieces.white})))}}]),n}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(33);var x=document.getElementById("root");o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(I,null)),x),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.e1187615.chunk.js.map